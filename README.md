# motomic

**motomic** は、BPM（テンポ）に同期した構造的モーションを生成・制御するためのツールキットです。
音と映像を構造的に接続し、譜面的な変化・時間的なリズムに沿った動きを作り出すことができます。
ライブパフォーマンスやVJ表現、ビジュアル・ミュージック制作などへの応用を想定しています。

---

## 概要

motomic は、次の3つの主構成で構成されます：

- `MotionValue`：時間とBPMに応じた値（0〜1）を出力する単位モーション
- `MotionGroup`：複数の `MotionValue` をまとめて管理・制御
- `BPMManager`：テンポ入力（タップなど）により、動作テンポを決定

---

## 機能詳細

### MotionValue

- BPMに基づいて `t` を時間として評価し、0〜1の範囲の値を返す
- 複数の「モード」（振る舞い）を切り替えることで異なる動きを生成可能
- 内部に `rleap`（乱数ステップ補間ユニット）を持ち、拍ごとの変化も表現可能

代表的なモード：
- `linear`: 時間に応じて直線的に上昇（周期的にリセット）
- `quantizedFourStep`: 4ステップで階段状に変化
- `randomStep`: 拍ごとに変化する乱数ステップ
- `lazyEasedStep`: 徐々に値が変化して静止時間を持つイージング変化
- `pulseStep`: 拍単位の短周期パルス
- `sinWaveSmooth`: 正弦波ベースの滑らかな変化

### MotionGroup

- 任意の数（デフォルト8）の `MotionValue` を同時に制御
- 全体のBPM変更、一括でのモード切り替え、個別のモード変更に対応
- 各モーションの現在値を配列で取得可能

利用例：
```js
const motionGroup = new MotionGroup(8, 120);
const values = motionGroup.getAllValues(); // 0〜1の配列
```

### BPMManager（実装中）

- `tap()` メソッドでタップテンポからBPMを推定
- 初期値を保持し、入力がない状態でもテンポ情報を維持
- 今後、タップヒストリの分析や安定化処理を予定

---

## 使用例

```js
function draw() {
  const values = motionGroup.getAllValues();
  for (let i = 0; i < values.length; i++) {
    const x = width / 9 * (i + 1);
    const y = map(values[i], 0, 1, height - 50, 50);
    ellipse(x, y, 20);
  }
}
```

---

## 開発背景

本ツールは、映像と音の同期表現における「構造的・タイムベースな制御」の必要性から着想されました。  
制作者が自身のライブパフォーマンス／VJ表現において必要とした動作を反映して設計されています。

特徴：
- 音楽と映像を「構造」でつなぐことを目的とした汎用性
- 決まった動き・定まった周期を持つ表現の切り替え
- モード単位での構成管理

---

## ライセンス・作者

- 制作・設計：きむらこうや
- 使用技術：JavaScript / p5.js  
- ライセンス：MIT（予定）

---

## 命名について

**motomic** は、以下の語の組み合わせからなる造語です：

- **motion**（動き）
- **atomic**（構造単位）
- **music**

構造的かつ音楽的な映像制御の単位を指すことを意図しています。

---

今後、プリセットや外部出力対応、パラメータマッピング機能などの追加も検討中です。
開発中の機能も含まれるため、仕様は予告なく変更される可能性があります。